(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{334:function(t,a,s){t.exports=s.p+"assets/img/image.f9ef5101.png"},402:function(t,a,s){"use strict";s.r(a);var e=s(25),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"webapck"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webapck"}},[t._v("#")]),t._v(" Webapck")]),t._v(" "),a("p",[t._v("参考官网很重要，官网不会过时。")]),t._v(" "),a("h2",{attrs:{id:"核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[t._v("#")]),t._v(" 核心概念")]),t._v(" "),a("ul",[a("li",[t._v("entry: 入口文件")]),t._v(" "),a("li",[t._v("output: 输出文件")]),t._v(" "),a("li",[t._v("loader:")])]),t._v(" "),a("p",[t._v("webpack 只能理解 JavaScript 和 JSON 文件，这是 webpack 开箱可用的自带能力。loader 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 模块，以供应用程序使用，以及被添加到依赖图中。")]),t._v(" "),a("p",[t._v("在更高层面，在 webpack 的配置中，loader 有两个属性：")]),t._v(" "),a("p",[t._v("test 属性，识别出哪些文件会被转换。\nuse 属性，定义出在进行转换时，应该使用哪个 loader。")]),t._v(" "),a("ul",[a("li",[t._v("plugin")])]),t._v(" "),a("p",[t._v("loader 用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。")]),t._v(" "),a("ul",[a("li",[t._v("mode: 模式")])]),t._v(" "),a("p",[t._v("通过选择 development, production 或 none 之中的一个，来设置 mode 参数，你可以启用 webpack 内置在相应环境下的优化。其默认值为 production。")]),t._v(" "),a("ul",[a("li",[t._v("browser compatibility: 浏览器兼容性")])]),t._v(" "),a("p",[t._v("Webpack 支持所有符合 ES5 标准 的浏览器（不支持 IE8 及以下版本）。webpack 的 import() 和 require.ensure() 需要 Promise。如果你想要支持旧版本浏览器，在使用这些表达式之前，还需要 提前加载 polyfill。")]),t._v(" "),a("ul",[a("li",[t._v("environment: 环境")])]),t._v(" "),a("p",[t._v("Webpack 5 运行于 Node.js v10.13.0+ 的版本。")]),t._v(" "),a("h2",{attrs:{id:"入口起点-entry-point"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#入口起点-entry-point"}},[t._v("#")]),t._v(" 入口起点 entry point")]),t._v(" "),a("h3",{attrs:{id:"单入口文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单入口文件"}},[t._v("#")]),t._v(" 单入口文件")]),t._v(" "),a("h3",{attrs:{id:"多入口文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多入口文件"}},[t._v("#")]),t._v(" 多入口文件")]),t._v(" "),a("h4",{attrs:{id:"常见场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见场景"}},[t._v("#")]),t._v(" 常见场景")]),t._v(" "),a("h5",{attrs:{id:"分离-app-应用程序-和-vendor-第三方库-入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分离-app-应用程序-和-vendor-第三方库-入口"}},[t._v("#")]),t._v(" ⭐️ 分离 app(应用程序) 和 vendor(第三方库) 入口")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vendor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/vendor.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("webpack.prod.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].[contenthash].bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("webpack.dev.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("⭐️ 这是什么？ 这是告诉 webpack 我们想要配置 2 个单独的入口点（例如上面的示例）。")]),t._v(" "),a("p",[t._v("⭐️ 为什么？ 这样你就可以在 vendor.js 中存入未做修改的必要 library 或文件（例如 Bootstrap, jQuery, 图片等），然后将它们打包在一起成为单独的 chunk。内容哈希保持不变，这使浏览器可以独立地缓存它们，从而减少了加载时间。")]),t._v(" "),a("p",[t._v("而在 webpack 4 中不鼓励这样做。而是使用 optimization.splitChunks 选项，将 vendor 和 app(应用程序) 模块分开，并为其创建一个单独的文件。不要 为 vendor 或其他不是执行起点创建 entry。")]),t._v(" "),a("h5",{attrs:{id:"多页面应用程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多页面应用程序"}},[t._v("#")]),t._v(" 多页面应用程序")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pageOne")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/pageOne/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pageTwo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/pageTwo/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pageThree")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/pageThree/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("这是什么？ 我们告诉 webpack 需要三个独立分离的依赖图（如上面的示例）。")]),t._v(" "),a("p",[t._v("为什么？ 在多页面应用程序中，server 会拉取一个新的 HTML 文档给你的客户端。页面重新加载此新文档，并且资源被重新下载。然而，这给了我们特殊的机会去做很多事，例如使用 optimization.splitChunks 为页面间共享的应用程序代码创建 bundle。由于入口起点数量的增多，多页应用能够复用多个入口起点之间的大量代码/模块，从而可以极大地从这些技术中受益。")]),t._v(" "),a("p",[t._v("提示：")]),t._v(" "),a("p",[t._v("根据经验：每个 HTML 文档只使用一个入口起点。具体原因请参阅此 issue。")]),t._v(" "),a("h2",{attrs:{id:"输出-output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出-output"}},[t._v("#")]),t._v(" 输出 output")]),t._v(" "),a("p",[t._v("可以通过配置 output 选项，告知 webpack 如何向硬盘写入编译文件。注意，即使可以存在多个 entry 起点，但只能指定一个 output 配置。")]),t._v(" "),a("h3",{attrs:{id:"单入口起点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单入口起点"}},[t._v("#")]),t._v(" 单入口起点")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"多个入口起点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多个入口起点"}},[t._v("#")]),t._v(" 多个入口起点")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("search")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/search.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" __dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写入到硬盘：./dist/app.js, ./dist/search.js")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:s(334),alt:"理解理解"}})]),t._v(" "),a("h3",{attrs:{id:"高级进阶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高级进阶"}},[t._v("#")]),t._v(" 高级进阶")]),t._v(" "),a("p",[t._v("以下是对资源使用 CDN 和 hash 的复杂示例：")]),t._v(" "),a("p",[t._v("config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/proj/cdn/assets/[fullhash]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("publicPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://cdn.example.com/assets/[fullhash]/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("如果在编译时，不知道最终输出文件的 publicPath 是什么地址，则可以将其留空，并且在运行时通过入口起点文件中的 "),a("strong",[t._v("webpack_public_path")]),t._v(" 动态设置")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("__webpack_public_path__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" myRuntimePublicPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 应用程序入口的其余部分")]),t._v("\n")])])]),a("h2",{attrs:{id:"loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[t._v("#")]),t._v(" loader")]),t._v(" "),a("p",[t._v('loader 用于对模块的源代码进行转换。loader 可以使你在 import 或 "load(加载)" 模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的得力方式。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 import CSS 文件！')]),t._v(" "),a("h3",{attrs:{id:"用例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用例"}},[t._v("#")]),t._v(" 用例")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.css$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//loader 从右到左（或从下到上）地取值(evaluate)/执行(execute)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("modules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sass-loader'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"编写自己的loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写自己的loader"}},[t._v("#")]),t._v(" 编写自己的loader")]),t._v(" "),a("h2",{attrs:{id:"plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin"}},[t._v("#")]),t._v(" plugin")]),t._v(" "),a("h3",{attrs:{id:"剖析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#剖析"}},[t._v("#")]),t._v(" 剖析")]),t._v(" "),a("p",[t._v("webpack 插件是一个具有 apply 方法的 JavaScript 对象。apply 方法会被 webpack compiler 调用，并且在 整个 编译生命周期都可以访问 compiler 对象。")]),t._v(" "),a("p",[t._v("ConsoleLogOnBuildWebpackPlugin.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pluginName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ConsoleLogOnBuildWebpackPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsoleLogOnBuildWebpackPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pluginName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack 构建正在启动！'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ConsoleLogOnBuildWebpackPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("compiler hook 的 tap 方法的第一个参数，应该是驼峰式命名的插件名称。建议为此使用一个常量，以便它可以在所有 hook 中重复使用。")]),t._v(" "),a("h3",{attrs:{id:"配置方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方式"}},[t._v("#")]),t._v(" 配置方式")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 访问内置的插件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-first-webpack.bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(js|jsx)$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ProgressPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.html'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ProgressPlugin 用于自定义编译过程中的进度报告，HtmlWebpackPlugin 将生成一个 HTML 文件，并在其中使用 script 引入一个名为 my-first-webpack.bundle.js 的 JS 文件。")]),t._v(" "),a("h3",{attrs:{id:"提示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提示"}},[t._v("#")]),t._v(" 提示")]),t._v(" "),a("p",[t._v("你知道吗：以上看到的示例和 webpack 运行时(runtime)本身 极其类似。webpack 源码 中隐藏有大量使用示例，你可以将其应用在自己的配置和脚本中。")]),t._v(" "),a("h2",{attrs:{id:"配置-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-configuration"}},[t._v("#")]),t._v(" 配置 （Configuration）")]),t._v(" "),a("h3",{attrs:{id:"多个target"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多个target"}},[t._v("#")]),t._v(" 多个target")]),t._v(" "),a("p",[t._v("除了可以将单个配置导出为 object，function 或 Promise 以外，还可以将其导出为多个配置。")]),t._v(" "),a("h3",{attrs:{id:"使用其它配置语言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用其它配置语言"}},[t._v("#")]),t._v(" 使用其它配置语言")]),t._v(" "),a("p",[t._v("Webpack 支持由多种编程和数据语言编写的配置文件。")]),t._v(" "),a("h2",{attrs:{id:"模块-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块-modules"}},[t._v("#")]),t._v(" 模块（Modules）")]),t._v(" "),a("h3",{attrs:{id:"如何理解loader和modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何理解loader和modules"}},[t._v("#")]),t._v(" 如何理解loader和modules")]),t._v(" "),a("p",[t._v("Module（模块）")]),t._v(" "),a("p",[t._v("在 Webpack 里，Module 指的是项目中各个独立的文件或代码单元。Webpack 将项目中的所有文件（如 JavaScript、CSS、图片等）都视为模块，无论这些文件是自己编写的，还是从外部引入的第三方库。每个模块都有自己的功能和作用，并且可以通过特定的方式相互引用和依赖。\n例如，在一个前端项目中，可能会有多个 JavaScript 文件，每个文件负责不同的功能，如一个文件处理用户输入，另一个文件负责与服务器通信，这些文件都可以看作是独立的模块。")]),t._v(" "),a("p",[t._v("Loader（加载器）")]),t._v(" "),a("p",[t._v("Loader 是 Webpack 中的一个重要概念，它是用于处理不同类型模块的转换器。由于 Webpack 本身只能理解 JavaScript 和 JSON 文件，对于其他类型的文件（如 CSS、图片、TS 等），就需要使用 Loader 来将这些文件转换为 Webpack 能够处理的模块。\n例如，当你在项目中引入一个 CSS 文件时，Webpack 无法直接处理它，这时就需要使用 style-loader 和 css-loader 来将 CSS 文件转换为 JavaScript 模块，以便 Webpack 能够对其进行打包处理。")]),t._v(" "),a("h3",{attrs:{id:"何为webpack模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#何为webpack模块"}},[t._v("#")]),t._v(" 何为Webpack模块")]),t._v(" "),a("p",[t._v("与 Node.js 模块相比，webpack 模块能以各种方式表达它们的依赖关系。下面是一些示例：")]),t._v(" "),a("ul",[a("li",[t._v("ES2015 import 语句")]),t._v(" "),a("li",[t._v("CommonJS require() 语句")]),t._v(" "),a("li",[t._v("AMD define 和 require 语句")]),t._v(" "),a("li",[t._v("css/sass/less 文件中的 @import 语句。")]),t._v(" "),a("li",[t._v("stylesheet url(...) 或者 HTML的 img src文件中的图片链接。")])]),t._v(" "),a("h3",{attrs:{id:"支持的模块类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的模块类型"}},[t._v("#")]),t._v(" 支持的模块类型")]),t._v(" "),a("p",[t._v("Webpack 天生支持如下模块类型：")]),t._v(" "),a("ul",[a("li",[t._v("ECMAScript 模块")]),t._v(" "),a("li",[t._v("CommonJS 模块")]),t._v(" "),a("li",[t._v("AMD 模块")]),t._v(" "),a("li",[t._v("Assets")]),t._v(" "),a("li",[t._v("WebAssembly 模块")])]),t._v(" "),a("p",[t._v("⭐️ 通过 loader 可以使 webpack 支持多种语言和预处理器语法编写的模块。loader 向 webpack 描述了如何处理非原生 模块，并将相关依赖引入到你的 bundles中。 webpack 社区已经为各种流行的语言和预处理器创建了 loader，其中包括：")]),t._v(" "),a("ul",[a("li",[t._v("CoffeeScript")]),t._v(" "),a("li",[t._v("TypeScript")]),t._v(" "),a("li",[t._v("ESNext (Babel)")]),t._v(" "),a("li",[t._v("Sass")]),t._v(" "),a("li",[t._v("Less")]),t._v(" "),a("li",[t._v("Stylus")]),t._v(" "),a("li",[t._v("Elm")])]),t._v(" "),a("h2",{attrs:{id:"模块解析-module-resolution"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块解析-module-resolution"}},[t._v("#")]),t._v(" 模块解析（Module Resolution）")]),t._v(" "),a("h3",{attrs:{id:"enhanced-resolve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enhanced-resolve"}},[t._v("#")]),t._v(" enhanced-resolve")]),t._v(" "),a("p",[t._v("使用 enhanced-resolve，webpack 能解析三种文件路径")]),t._v(" "),a("ul",[a("li",[t._v("绝对路径")]),t._v(" "),a("li",[t._v("相对路径")]),t._v(" "),a("li",[t._v("模块路径")])]),t._v(" "),a("h3",{attrs:{id:"解析-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解析-loader"}},[t._v("#")]),t._v(" 解析 loader")]),t._v(" "),a("p",[t._v("loader 的解析规则也遵循特定的规范。但是 resolveLoader 配置项可以为 loader 设置独立的解析规则。")]),t._v(" "),a("h3",{attrs:{id:"缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[t._v("#")]),t._v(" 缓存")]),t._v(" "),a("p",[t._v("每次文件系统访问文件都会被缓存，以便于更快触发对同一文件的多个并行或串行请求。在 watch 模式 下，只有修改过的文件会被从缓存中移出。如果关闭 watch 模式，则会在每次编译前清理缓存。")]),t._v(" "),a("h2",{attrs:{id:"模块联邦-module-federation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块联邦-module-federation"}},[t._v("#")]),t._v(" 模块联邦（Module Federation）")]),t._v(" "),a("p",[t._v("多个独立的构建可以组成一个应用程序，这些独立的构建之间不应该存在依赖关系，因此可以单独开发和部署它们。")]),t._v(" "),a("p",[t._v("这通常被称作微前端，但并不仅限于此。")]),t._v(" "),a("h2",{attrs:{id:"依赖图-dependency-graph"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖图-dependency-graph"}},[t._v("#")]),t._v(" 依赖图（Dependency Graph）")]),t._v(" "),a("p",[t._v("每当一个文件依赖另一个文件时，webpack 都会将文件视为直接存在 依赖关系。这使得 webpack 可以获取非代码资源，如 images 或 web 字体等。并会把它们作为 依赖 提供给应用程序。")]),t._v(" "),a("p",[t._v("当 webpack 处理应用程序时，它会根据命令行参数中或配置文件中定义的模块列表开始处理。 从 入口 开始，webpack 会递归的构建一个 依赖关系图，这个依赖图包含着应用程序中所需的每个模块，然后将所有模块打包为少量的 bundle —— 通常只有一个 —— 可由浏览器加载。")]),t._v(" "),a("h2",{attrs:{id:"构建目标-target"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建目标-target"}},[t._v("#")]),t._v(" 构建目标（target）")]),t._v(" "),a("p",[t._v("由于 JavaScript 既可以编写服务端代码也可以编写浏览器代码，所以 webpack 提供了多种部署 target，你可以在 webpack 的配置选项中进行设置。")]),t._v(" "),a("p",[t._v("当没有提供 target 或 environment 特性的信息时，将默认使用 ES2015。")]),t._v(" "),a("h2",{attrs:{id:"表明-manifest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表明-manifest"}},[t._v("#")]),t._v(" 表明（manifest）")]),t._v(" "),a("p",[t._v("在使用 webpack 构建的典型应用程序或站点中，有三种主要的代码类型：")]),t._v(" "),a("ol",[a("li",[t._v("你或你的团队编写的源码。")]),t._v(" "),a("li",[t._v('你的源码会依赖的任何第三方的 library 或 "vendor" 代码。')]),t._v(" "),a("li",[t._v("webpack 的 runtime 和 manifest，管理所有模块的交互。")])]),t._v(" "),a("p",[t._v("本文将重点介绍这三个部分中的最后部分：runtime 和 manifest，特别是 manifest。")]),t._v(" "),a("h3",{attrs:{id:"runtime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runtime"}},[t._v("#")]),t._v(" runtime")]),t._v(" "),a("p",[t._v("runtime，以及伴随的 manifest 数据，主要是指：在浏览器运行过程中，webpack 用来连接模块化应用程序所需的所有代码。它包含：在模块交互时，连接模块所需的加载和解析逻辑。包括：已经加载到浏览器中的连接模块逻辑，以及尚未加载模块的延迟加载逻辑。")]),t._v(" "),a("h3",{attrs:{id:"mainfest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mainfest"}},[t._v("#")]),t._v(" mainfest")]),t._v(" "),a("p",[t._v("一旦你的应用在浏览器中以 index.html 文件的形式被打开，一些 bundle 和应用需要的各种资源都需要用某种方式被加载与链接起来。在经过打包、压缩、为延迟加载而拆分为细小的 chunk 这些 webpack 优化 之后，你精心安排的 /src 目录的文件结构都已经不再存在。所以 webpack 如何管理所有所需模块之间的交互呢？这就是 manifest 数据用途的由来……")]),t._v(" "),a("p",[t._v('当 compiler 开始执行、解析和映射应用程序时，它会保留所有模块的详细要点。这个数据集合称为 "manifest"，当完成打包并发送到浏览器时，runtime 会通过 manifest 来解析和加载模块。无论你选择哪种 模块语法，那些 import 或 require 语句现在都已经转换为 '),a("strong",[t._v("webpack_require")]),t._v(" 方法，此方法指向模块标识符(module identifier)。通过使用 manifest 中的数据，runtime 将能够检索这些标识符，找出每个标识符背后对应的模块。")]),t._v(" "),a("h3",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("所以，现在你应该对 webpack 在幕后工作有一点了解。“但是，这对我有什么影响呢？”，你可能会问。答案是大多数情况下没有。runtime 做完成这些工作：一旦你的应用程序加载到浏览器中，使用 manifest，然后所有内容将展现出魔幻般运行结果。然而，如果你决定通过使用浏览器缓存来改善项目的性能，理解这一过程将突然变得极为重要。")]),t._v(" "),a("p",[t._v("通过使用内容散列(content hash)作为 bundle 文件的名称，这样在文件内容修改时，会计算出新的 hash，浏览器会使用新的名称加载文件，从而使缓存无效。一旦你开始这样做，你会立即注意到一些有趣的行为。即使某些内容明显没有修改，某些 hash 还是会改变。这是因为，注入的 runtime 和 manifest 在每次构建后都会发生变化。")]),t._v(" "),a("p",[t._v("查看 管理输出 指南的 manifest 部分，了解如何提取 manifest，并阅读下面的指南，以了解更多长效缓存错综复杂之处。")]),t._v(" "),a("h2",{attrs:{id:"模块热替换-hot-module-replacement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块热替换-hot-module-replacement"}},[t._v("#")]),t._v(" 模块热替换（hot module replacement）")]),t._v(" "),a("p",[t._v("模块热替换(HMR - hot module replacement)功能会在应用程序运行过程中，替换、添加或删除 模块，而无需重新加载整个页面。主要是通过以下几种方式，来显著加快开发速度：")]),t._v(" "),a("ul",[a("li",[t._v("保留在完全重新加载页面期间丢失的应用程序状态。")]),t._v(" "),a("li",[t._v("只更新变更内容，以节省宝贵的开发时间。")]),t._v(" "),a("li",[t._v("在源代码中 CSS/JS 产生修改时，会立刻在浏览器中进行更新，这几乎相当于在浏览器 devtools 直接更改样式。")])]),t._v(" "),a("h2",{attrs:{id:"为什么选择webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择webpack"}},[t._v("#")]),t._v(" 为什么选择webpack")]),t._v(" "),a("p",[t._v("想要理解为什么要使用 webpack，我们先回顾下历史，在打包工具出现之前，我们是如何在 web 中使用 JavaScript 的。")]),t._v(" "),a("p",[t._v("在浏览器中运行 JavaScript 有两种方法。第一种方式，引用一些脚本来存放每个功能；此解决方案很难扩展，因为加载太多脚本会导致网络瓶颈。第二种方式，使用一个包含所有项目代码的大型 .js 文件，但是这会导致作用域、文件大小、可读性和可维护性方面的问题。")]),t._v(" "),a("h3",{attrs:{id:"立即调用函数表达式-iife"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#立即调用函数表达式-iife"}},[t._v("#")]),t._v(" 立即调用函数表达式(IIFE)")]),t._v(" "),a("p",[t._v("IIFE 解决大型项目的作用域问题；当脚本文件被封装在 IIFE 内部时，你可以安全地拼接或安全地组合所有文件，而不必担心作用域冲突。")]),t._v(" "),a("p",[t._v("IIFE 使用方式产生出 Make, Gulp, Grunt, Broccoli 或 Brunch 等工具。这些工具称为任务执行器，它们将所有项目文件拼接在一起。")]),t._v(" "),a("p",[t._v("但是，修改一个文件意味着必须重新构建整个文件。拼接可以做到很容易地跨文件重用脚本，但是却使构建结果的优化变得更加困难。如何判断代码是否实际被使用？")]),t._v(" "),a("p",[t._v("即使你只用到 lodash 中的某个函数，也必须在构建结果中加入整个库，然后将它们压缩在一起。如何 treeshake 代码依赖？难以大规模地实现延迟加载代码块，这需要开发人员手动地进行大量工作。")]),t._v(" "),a("h3",{attrs:{id:"省略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#省略"}},[t._v("#")]),t._v(" 省略...")]),t._v(" "),a("h3",{attrs:{id:"看起来都不是很好"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#看起来都不是很好"}},[t._v("#")]),t._v(" 看起来都不是很好……")]),t._v(" "),a("p",[t._v("是否可以有一种方式，不仅可以让我们编写模块，而且还支持任何模块格式（至少在我们到达 ESM 之前），并且可以同时处理资源和资产？")]),t._v(" "),a("p",[t._v("这就是 webpack 存在的原因。它是一个工具，可以打包你的 JavaScript 应用程序（支持 ESM 和 CommonJS），可以扩展为支持许多不同的静态资源，例如：images, fonts 和 stylesheets。")]),t._v(" "),a("p",[t._v("webpack 关心性能和加载时间；它始终在改进或添加新功能，例如：异步地加载 chunk 和预取，以便为你的项目和用户提供最佳体验。")]),t._v(" "),a("h2",{attrs:{id:"揭示内部原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#揭示内部原理"}},[t._v("#")]),t._v(" 揭示内部原理")]),t._v(" "),a("h3",{attrs:{id:"主要部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要部分"}},[t._v("#")]),t._v(" 主要部分")]),t._v(" "),a("p",[t._v("项目中使用的每个文件都是一个 模块")]),t._v(" "),a("p",[t._v("通过互相引用，这些模块会形成一个图(ModuleGraph)数据结构。")]),t._v(" "),a("h3",{attrs:{id:"chunk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chunk"}},[t._v("#")]),t._v(" chunk")]),t._v(" "),a("p",[t._v("chunk 有两种形式：")]),t._v(" "),a("ul",[a("li",[t._v("initial(初始化) 是入口起点的 main chunk。此 chunk 包含为入口起点指定的所有模块及其依赖项。")]),t._v(" "),a("li",[t._v("non-initial 是可以延迟加载的块。可能会出现在使用 动态导入(dynamic imports) 或者 SplitChunksPlugin 时。")])]),t._v(" "),a("p",[t._v("每个 chunk 都有对应的 asset(资源)。资源，是指输出文件（即打包结果）。")]),t._v(" "),a("h3",{attrs:{id:"output-输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-输出"}},[t._v("#")]),t._v(" output(输出)")]),t._v(" "),a("p",[t._v("输出文件的名称会受配置中的两个字段的影响：")]),t._v(" "),a("ul",[a("li",[t._v("output.filename - 用于 initial chunk 文件")]),t._v(" "),a("li",[t._v("output.chunkFilename - 用于 non-initial chunk 文件")]),t._v(" "),a("li",[t._v("在某些情况下，使用 initial 和 non-initial 的 chunk 时，可以使用 output.filename。")])]),t._v(" "),a("p",[t._v("这些字段中会有一些 占位符。常用的占位符如下：")]),t._v(" "),a("ul",[a("li",[t._v("[id] - chunk id（例如 [id].js -> 485.js）")]),t._v(" "),a("li",[t._v("[name] - chunk name（例如 [name].js -> app.js）。如果 chunk 没有名称，则会使用其 id 作为名称")]),t._v(" "),a("li",[t._v("[contenthash] - 输出文件内容的 md4-hash（例如 [contenthash].js -> 4ea6ff1de66c537eb9b2.js）")])]),t._v(" "),a("h2",{attrs:{id:"webpack配置页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置页"}},[t._v("#")]),t._v(" webpack配置页")]),t._v(" "),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("h4",{attrs:{id:"无配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无配置"}},[t._v("#")]),t._v(" 无配置")]),t._v(" "),a("p",[t._v("webpack 开箱即用，可以无需使用任何配置文件。然而，webpack 会假定项目的入口起点为 src/index.js，\n然后会在 dist/main.js 输出结果，并且在生产环境开启压缩和优化。")]),t._v(" "),a("h4",{attrs:{id:"使用不同的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用不同的配置文件"}},[t._v("#")]),t._v(" 使用不同的配置文件")]),t._v(" "),a("p",[t._v("如果出于某些原因，需要根据特定情况使用不同的配置文件，则可以通过在命令行中使用 --config 标志修改。")]),t._v(" "),a("p",[t._v("package.json")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config prod.config.js"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"设置一个新的-webpack-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置一个新的-webpack-项目"}},[t._v("#")]),t._v(" 设置一个新的 webpack 项目")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx webpack init\n\n? Do you want to simplify the creation of HTML files "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your bundle? Yes\n? Will you be using PostCSS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" your project? Yes\n? Do you want to extract CSS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" every file? Only "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Production\n? Do you like to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" prettier to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" generated configuration? Yes\n\ndevDependencies:\n+ @babel/core "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.19")]),t._v(".3\n+ @babel/preset-env "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.19")]),t._v(".4\n+ autoprefixer "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.4")]),t._v(".12\n+ babel-loader "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.2")]),t._v(".5\n+ css-loader "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.7")]),t._v(".1\n+ html-webpack-plugin "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0\n+ mini-css-extract-plugin "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.6")]),t._v(".1\n+ postcss "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.4")]),t._v(".17\n+ postcss-loader "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.0")]),t._v(".1\n+ prettier "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.7")]),t._v(".1\n+ style-loader "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".1\n+ webpack-dev-server "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.11")]),t._v(".1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("webpack-cli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Project has been initialised with webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),a("h3",{attrs:{id:"configuration-languages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration-languages"}},[t._v("#")]),t._v(" Configuration Languages")]),t._v(" "),a("h4",{attrs:{id:"typescript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#typescript"}},[t._v("#")]),t._v(" TypeScript")]),t._v(" "),a("p",[t._v("要使用 Typescript 来编写 webpack 配置，你需要先安装必要的依赖，比如 Typescript 以及其相应的类型声明，类型声明可以从 DefinitelyTyped 项目中获取，依赖安装如下所示：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev typescript ts-node @types/node @types/webpack\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果使用版本低于 v4.7.0 的 webpack-dev-server，还需要安装以下依赖")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev @types/webpack-dev-server\n")])])]),a("h3",{attrs:{id:"configuration-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration-types"}},[t._v("#")]),t._v(" Configuration Types")]),t._v(" "),a("h3",{attrs:{id:"入口和上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#入口和上下文"}},[t._v("#")]),t._v(" 入口和上下文")]),t._v(" "),a("h3",{attrs:{id:"模式-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模式-mode"}},[t._v("#")]),t._v(" 模式（Mode）")]),t._v(" "),a("p",[t._v("提供 mode 配置选项，告知 webpack 使用相应模式的内置优化。")]),t._v(" "),a("p",[t._v("string = 'production': 'none' | 'development' | 'production'")]),t._v(" "),a("p",[t._v("none\t不使用任何默认优化选项。如果没有设置，webpack 会给 mode 的默认值设置为 production。")]),t._v(" "),a("h3",{attrs:{id:"output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[t._v("#")]),t._v(" Output")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunkFilename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[id].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5.20.0+")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("clean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在生成文件之前清空 output 目录")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("keep")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("ignored\\/dir\\/")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保留 'ignored/dir' 下的静态资源, 还有其他写法哦！！！")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[id].bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("library")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyLibrary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出一个库，为你的入口做导出。")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[t._v("#")]),t._v(" Module")]),t._v(" "),a("h3",{attrs:{id:"优化-optimization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化-optimization"}},[t._v("#")]),t._v(" 优化（Optimization）")]),t._v(" "),a("p",[t._v("从 webpack 4 开始，会根据你选择的 mode 来执行不同的优化， 不过所有的优化还是可以手动配置和重写。")]),t._v(" "),a("h4",{attrs:{id:"optimization-chunkids"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optimization-chunkids"}},[t._v("#")]),t._v(" optimization.chunkIds")]),t._v(" "),a("h3",{attrs:{id:"插件-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugins"}},[t._v("#")]),t._v(" 插件（Plugins）")]),t._v(" "),a("h3",{attrs:{id:"devserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[t._v("#")]),t._v(" ⭐️ DevServer")]),t._v(" "),a("h4",{attrs:{id:"devserver-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devserver-proxy"}},[t._v("#")]),t._v(" ⭐️ devServer.proxy")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'/api'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pathRewrite")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'^/api'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"devserver-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devserver-server"}},[t._v("#")]),t._v(" devServer.server")]),t._v(" "),a("p",[t._v("'http' | 'https' | 'spdy' string object")]),t._v(" "),a("h3",{attrs:{id:"cache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache"}},[t._v("#")]),t._v(" Cache")]),t._v(" "),a("p",[t._v("缓存生成的 webpack 模块和 chunk，来改善构建速度。cache 会在开发 模式被设置成 type: 'memory' 而且在 生产 模式 中被禁用。 cache: true 与 cache: { type: 'memory' } 配置作用一致。 传入 false 会禁用缓存")]),t._v(" "),a("h3",{attrs:{id:"devtool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devtool"}},[t._v("#")]),t._v(" Devtool")]),t._v(" "),a("p",[t._v("此选项控制是否生成，以及如何生成 source map")]),t._v(" "),a("h3",{attrs:{id:"构建目标-targets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建目标-targets"}},[t._v("#")]),t._v(" 构建目标（Targets）")]),t._v(" "),a("h3",{attrs:{id:"watch和watchoptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#watch和watchoptions"}},[t._v("#")]),t._v(" watch和watchOptions")]),t._v(" "),a("p",[t._v("Webpack 可以监听文件变化，当它们修改后会重新编译。这个页面介绍了如何启用这个功能，以及当 watch 无法正常运行的时候你可以做的一些调整。")]),t._v(" "),a("p",[t._v("也可以使用多 glob 匹配模式：")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("watchOptions")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ignored")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'**/files/**/*.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'**/node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"外部扩展-externals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外部扩展-externals"}},[t._v("#")]),t._v(" ⭐️ 外部扩展（Externals）")]),t._v(" "),a("h3",{attrs:{id:"performance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#performance"}},[t._v("#")]),t._v(" Performance")]),t._v(" "),a("h3",{attrs:{id:"node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" Node")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("node")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("global")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("__filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("__dirname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"stats-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stats-对象"}},[t._v("#")]),t._v(" Stats 对象")]),t._v(" "),a("p",[t._v("stats 选项让你更精确地控制 bundle 信息该怎么显示。 如果你不希望使用 quiet 或 noInfo 这样的不显示信息，而是又不想得到全部的信息，\n只是想要获取某部分 bundle 的信息，使用 stats 选项是比较好的折衷方式。")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("stats")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'errors-only'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只在发生错误时输出")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"实验特性-experiments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实验特性-experiments"}},[t._v("#")]),t._v(" 实验特性（Experiments）")]),t._v(" "),a("h3",{attrs:{id:"其他选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他选项"}},[t._v("#")]),t._v(" 其他选项")]),t._v(" "),a("h2",{attrs:{id:"webpack指南页-部分摘录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack指南页-部分摘录"}},[t._v("#")]),t._v(" webpack指南页（部分摘录）")]),t._v(" "),a("h3",{attrs:{id:"起步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#起步"}},[t._v("#")]),t._v(" 起步")]),t._v(" "),a("p",[t._v("创建package.json文件 "),a("code",[t._v("npm init -y")])]),t._v(" "),a("p",[t._v("安装依赖 "),a("code",[t._v("npm install webpack webpack-cli --save-dev")])]),t._v(" "),a("p",[t._v("安装开发环境依赖 "),a("code",[t._v("npm install -D webpack-dev-server")]),t._v("\n(npm script中：webpack直接打包输出，webpack serve 启动开发服务器，内存编译打包，没有输出)")]),t._v(" "),a("p",[t._v("webpack本身只能处理js和json文件。")]),t._v(" "),a("p",[t._v("运行cli 或者 编写 npm script（npm run dev, npm run build）")]),t._v(" "),a("ul",[a("li",[t._v("webpack开发环境的打包 "),a("code",[t._v("npx webpack --config ./config/webpack.dev.config.js")])]),t._v(" "),a("li",[t._v("webpack生产环境的打包 "),a("code",[t._v("npx webpack --config ./config/webpack.prod.config.js")])])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config ./config/webpack.dev.config.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config ./config/webpack.prod.config.js"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"管理资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理资源"}},[t._v("#")]),t._v(" 管理资源")]),t._v(" "),a("p",[t._v("安装css-loader的相关依赖 "),a("code",[t._v("npm install --save-dev style-loader css-loader")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.css$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("i")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("其他资源："),a("code",[t._v("npm uninstall css-loader csv-loader json5 style-loader toml xml-loader yamljs")])]),t._v(" "),a("h3",{attrs:{id:"开发环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),a("h4",{attrs:{id:"使用-source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-source-map"}},[t._v("#")]),t._v(" 使用 source map")]),t._v(" "),a("p",[a("code",[t._v("devtool: 'inline-source-map'")])]),t._v(" "),a("h4",{attrs:{id:"选择一个开发工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择一个开发工具"}},[t._v("#")]),t._v(" 选择一个开发工具")]),t._v(" "),a("ul",[a("li",[t._v("使用观察模式")]),t._v(" "),a("li",[t._v("使用webpack-dev-server")]),t._v(" "),a("li",[t._v("使用webpack-dev-middleware")])]),t._v(" "),a("h3",{attrs:{id:"代码分离"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码分离"}},[t._v("#")]),t._v(" 代码分离")]),t._v(" "),a("h4",{attrs:{id:"分析bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析bundle"}},[t._v("#")]),t._v(" 分析bundle")]),t._v(" "),a("ul",[a("li",[t._v("webpack-chart：webpack stats 可交互饼图。")]),t._v(" "),a("li",[t._v("webpack-visualizer：分析并可视化 bundle，检查哪些模块占用空间，哪些可能是重复使用的。")]),t._v(" "),a("li",[t._v("webpack-bundle-analyzer：一个 plugin 和 CLI 工具，它将 bundle 内容展示为一个便捷的、交互式、可缩放的树状图形式。")]),t._v(" "),a("li",[t._v("webpack bundle optimize helper：这个工具会分析 bundle，并提供可操作的改进措施，以减少 bundle 的大小。")]),t._v(" "),a("li",[t._v("bundle-stats：生成一个 bundle 报告（bundle 大小、资源、模块），并比较不同构建之间的结果。")])]),t._v(" "),a("h3",{attrs:{id:"创建库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建库"}},[t._v("#")]),t._v(" 创建库")]),t._v(" "),a("h4",{attrs:{id:"暴露库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#暴露库"}},[t._v("#")]),t._v(" 暴露库")]),t._v(" "),a("p",[t._v("webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-numbers.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("library")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpackNumbers"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 暴露的库名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"外部化-lodash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外部化-lodash"}},[t._v("#")]),t._v(" 外部化 lodash")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("module.exports = {\n  // ...\n  externals: {\n    lodash: {\n      commonjs: 'lodash',\n      commonjs2: 'lodash',\n      amd: 'lodash',\n      root: '_',\n    },\n  },\n}\n")])])]),a("h3",{attrs:{id:"构建性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建性能"}},[t._v("#")]),t._v(" 构建性能")]),t._v(" "),a("h4",{attrs:{id:"通用环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通用环境"}},[t._v("#")]),t._v(" 通用环境")]),t._v(" "),a("h4",{attrs:{id:"开发环境-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境-2"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),a("h6",{attrs:{id:"避免使用在生产环境下才会用到的工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#避免使用在生产环境下才会用到的工具"}},[t._v("#")]),t._v(" 避免使用在生产环境下才会用到的工具")]),t._v(" "),a("p",[t._v("某些工具、插件与 loader 都只用于生产环境。例如，在开发环境下使用 TerserPlugin 压缩和破坏代码是没有意义的。通常应该在开发环境下排除以下工具：")]),t._v(" "),a("ul",[a("li",[t._v("TerserPlugin")]),t._v(" "),a("li",[t._v("[fullhash]/[chunkhash]/[contenthash]")]),t._v(" "),a("li",[t._v("AggressiveSplittingPlugin")]),t._v(" "),a("li",[t._v("AggressiveMergingPlugin")]),t._v(" "),a("li",[t._v("ModuleConcatenationPlugin")])]),t._v(" "),a("h3",{attrs:{id:"生产环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境"}},[t._v("#")]),t._v(" 生产环境")]),t._v(" "),a("h4",{attrs:{id:"源码映射-source-mapping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码映射-source-mapping"}},[t._v("#")]),t._v(" 源码映射（Source Mapping）")]),t._v(" "),a("p",[t._v("对于本指南，我们将在 生产环境 中使用 source-map 选项，而不是我们在开发环境中用到的 inline-source-map")]),t._v(" "),a("h3",{attrs:{id:"ecmascript-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-模块"}},[t._v("#")]),t._v(" ECMAScript 模块")]),t._v(" "),a("p",[t._v("ECMAScript 模块（ESM）是在 Web 中使用模块的规范。 所有现代浏览器均支持此功能，同时也是在 Web 中编写模块化代码的推荐方式。")]),t._v(" "),a("p",[t._v("webpack 支持处理 ECMAScript 模块以优化它们。")]),t._v(" "),a("h3",{attrs:{id:"web-workers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-workers"}},[t._v("#")]),t._v(" ⭐️ Web Workers")]),t._v(" "),a("p",[t._v("从 webpack 5 开始，你可以使用 Web Workers 代替 worker-loader。")]),t._v(" "),a("p",[t._v("语法 "),a("code",[t._v("new Worker(new URL('./worker.js', import.meta.url));")])]),t._v(" "),a("h2",{attrs:{id:"webpack迁移页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack迁移页"}},[t._v("#")]),t._v(" webpack迁移页")]),t._v(" "),a("h3",{attrs:{id:"从v4升级到v5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从v4升级到v5"}},[t._v("#")]),t._v(" 从v4升级到v5")]),t._v(" "),a("h4",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),a("h4",{attrs:{id:"升级webpack4-及其相关的plugin-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级webpack4-及其相关的plugin-loader"}},[t._v("#")]),t._v(" 升级webpack4 及其相关的plugin/loader")]),t._v(" "),a("h4",{attrs:{id:"升级至wepback5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级至wepback5"}},[t._v("#")]),t._v(" 升级至wepback5")]),t._v(" "),a("h5",{attrs:{id:"清理配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清理配置"}},[t._v("#")]),t._v(" 清理配置")]),t._v(" "),a("ul",[a("li",[t._v("请考虑将 optimization.moduleIds 和 optimization.chunkIds 从你 webpack 配置中移除。使用默认值会更合适，因为它们会在 production 模式 下支持长效缓存且可以在 development 模式下进行调试。")]),t._v(" "),a("li",[t._v("当 webpack 配置中使用了 [hash] 占位符时，请考虑将它改为 [contenthash]。效果一致，但事实证明会更为有效。")]),t._v(" "),a("li",[t._v("如果你在 webpack 的 Node.js API 中使用了 watch: true，请移除它。无需按编译器的提示设置它，当执行 watch() 时为 true，当执行 run() 的时候为 false。")]),t._v(" "),a("li",[t._v("如果你定义了 rules，以使用 raw-loader，url-loader 或 file-loader 来加载资源，请使用 资源模块 替代，因为它们可能在不久的将来被淘汰。")])]),t._v(" "),a("h2",{attrs:{id:"开发注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发注意"}},[t._v("#")]),t._v(" 开发注意")]),t._v(" "),a("h3",{attrs:{id:"生产环境使用缓存-存在一些风险。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境使用缓存-存在一些风险。"}},[t._v("#")]),t._v(" 生产环境使用缓存，存在一些风险。")]),t._v(" "),a("h3",{attrs:{id:"不要在生产环境之外使用-terserplugin-或-css-压缩插件。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不要在生产环境之外使用-terserplugin-或-css-压缩插件。"}},[t._v("#")]),t._v(" 不要在生产环境之外使用 TerserPlugin 或 CSS 压缩插件。")]),t._v(" "),a("h3",{attrs:{id:"同时使用-style-loader-与-mini-css-extract-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同时使用-style-loader-与-mini-css-extract-plugin"}},[t._v("#")]),t._v(" 同时使用 style-loader 与 mini-css-extract-plugin")]),t._v(" "),a("p",[t._v("推荐 production 环境的构建将 CSS 从你的 bundle 中分离出来，这样可以使用 CSS/JS 文件的并行加载。 这可以通过使用 mini-css-extract-plugin 来实现，因为它可以创建单独的 CSS 文件。 对于 development 模式（包括 webpack-dev-server），你可以使用 style-loader，因为它可以使用多个 标签将 CSS 插入到 DOM 中，并且反应会更快。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MiniCssExtractPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mini-css-extract-plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" devMode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(sa|sc|c)ss$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          devMode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"style-loader"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MiniCssExtractPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postcss-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sass-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("devMode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"延伸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#延伸"}},[t._v("#")]),t._v(" 延伸")]),t._v(" "),a("h3",{attrs:{id:"webpack为什么生产模式才需要压缩体积"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack为什么生产模式才需要压缩体积"}},[t._v("#")]),t._v(" webpack为什么生产模式才需要压缩体积？")]),t._v(" "),a("h4",{attrs:{id:"开发环境的目标是快速构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境的目标是快速构建"}},[t._v("#")]),t._v(" 开发环境的目标是快速构建")]),t._v(" "),a("p",[t._v("在开发环境中，主要目标是快速构建和调试代码，而不是优化代码体积。压缩代码会增加构建时间，影响开发效率。")]),t._v(" "),a("p",[t._v("开发环境：需要快速反馈，支持热更新（HMR）和源码映射（Source Map），方便调试。")]),t._v(" "),a("p",[t._v("生产环境：需要优化代码体积和性能，减少用户加载时间。")]),t._v(" "),a("h4",{attrs:{id:"压缩代码会丢失可读性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩代码会丢失可读性"}},[t._v("#")]),t._v(" 压缩代码会丢失可读性")]),t._v(" "),a("p",[t._v("压缩工具（如 Terser）会移除空格、注释、缩短变量名等，导致代码难以阅读和调试。")]),t._v(" "),a("ul",[a("li",[t._v("开发环境：需要可读性强的代码，方便调试和定位问题。")]),t._v(" "),a("li",[t._v("生产环境：不需要可读性，更关注运行效率和加载速度。")])]),t._v(" "),a("h4",{attrs:{id:"生产环境需要优化用户体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境需要优化用户体验"}},[t._v("#")]),t._v(" 生产环境需要优化用户体验")]),t._v(" "),a("p",[t._v("在生产环境中，代码体积直接影响用户体验：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("更小的体积：减少网络传输时间，提升页面加载速度。")])]),t._v(" "),a("li",[a("p",[t._v("更少的请求：通过代码分割和压缩，减少 HTTP 请求数量。")])]),t._v(" "),a("li",[a("p",[t._v("更低的带宽成本：减少服务器和用户的流量消耗。")])])]),t._v(" "),a("h4",{attrs:{id:"for-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-example"}},[t._v("#")]),t._v(" for example")]),t._v(" "),a("ul",[a("li",[t._v("压缩图片，压缩js，压缩css， treeshaking（组件库按需加载、lodash-es等）")])]),t._v(" "),a("h3",{attrs:{id:"多线程和多进程的差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多线程和多进程的差异"}},[t._v("#")]),t._v(" 多线程和多进程的差异")]),t._v(" "),a("p",[t._v("多线程：在同一进程内，多个线程共享进程的资源（如内存），线程之间的通信相对简单，但由于共享资源，可能会出现竞争条件等问题。thread-loader 就是利用多线程来并行处理模块。\n多进程：每个进程都有自己独立的内存空间和系统资源，进程之间的通信相对复杂，但可以更好地利用多核 CPU 的资源，避免线程之间的竞争问题。terser-webpack-plugin 开启多进程压缩就是利用了多个独立的进程来并行处理代码压缩。")]),t._v(" "),a("h3",{attrs:{id:"书写loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#书写loader"}},[t._v("#")]),t._v(" 书写loader")]),t._v(" "),a("p",[t._v("详见官网的API(网址/api/loaders)")]),t._v(" "),a("h4",{attrs:{id:"分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[t._v("#")]),t._v(" 分类")]),t._v(" "),a("ul",[a("li",[t._v("同步Loaders（同步代码存放地）")]),t._v(" "),a("li",[t._v("异步Loaders（异步代码存放地）")]),t._v(" "),a("li",[t._v("“Raw” Loader （loader 可以接收原始的 Buffer，eg: 字体，图标）")]),t._v(" "),a("li",[t._v("Pitching Loader (需要提前终止程序)")])]),t._v(" "),a("p",[t._v("关键词：参数content、map、meta，this.callback()，this.async()，module.exports.raw = true，\nmodule.exports.pitch")]),t._v(" "),a("h4",{attrs:{id:"常见loader的api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见loader的api"}},[t._v("#")]),t._v(" 常见loader的API")]),t._v(" "),a("ul",[a("li",[t._v("this.getOptions: 提取给定的 loader 选项")]),t._v(" "),a("li",[t._v("this.emitFile 产生一个文件")]),t._v(" "),a("li",[t._v("this.utils.contextify 返回一个相对路径")]),t._v(" "),a("li",[t._v("this.utils.absolutify 返回一个绝对路径")])]),t._v(" "),a("h4",{attrs:{id:"开发loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发loader"}},[t._v("#")]),t._v(" 开发loader")]),t._v(" "),a("ul",[a("li",[t._v("清空文件内容中的console.log(xxx)")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ? 可能有， /g 是全集")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("console\\.log\\(.*\\);?")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"webpack是用commonjs开发-而不是基于es模块开发-对吧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack是用commonjs开发-而不是基于es模块开发-对吧"}},[t._v("#")]),t._v(" webpack是用commonjs开发，而不是基于ES模块开发，对吧")]),t._v(" "),a("p",[t._v("是的，Webpack 主要是基于 CommonJS 模块系统开发的，而不是基于 ES 模块（ESM）。这一点在 Webpack 的设计和实现中体现得非常明显。以下是一些关键点来解释为什么 Webpack 主要使用 CommonJS，而不是 ES 模块")]),t._v(" "),a("p",[t._v("1.历史背景")]),t._v(" "),a("p",[t._v("Webpack的诞生时间：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 最早发布于 2012 年，而 ES 模块（ESM）是在 2015 年随着 ES6（ES2015）的发布才正式成为 JavaScript 的标准。")]),t._v(" "),a("li",[t._v("在 Webpack 诞生时，CommonJS 是 Node.js 生态中主流的模块系统，因此 Webpack 选择了 CommonJS 作为其核心模块系统。")])]),t._v(" "),a("p",[t._v("浏览器对 ES 模块的支持：")]),t._v(" "),a("ul",[a("li",[t._v('浏览器对原生 ES 模块的支持是在 2017 年之后才逐渐普及的（通过 script type="module"），而 Webpack 的设计早于这一时间。')])]),t._v(" "),a("p",[t._v("2.CommonJS 的特性")]),t._v(" "),a("p",[t._v("动态加载：")]),t._v(" "),a("ul",[a("li",[t._v("CommonJS 的 require() 是动态的，可以在代码的任何地方使用，甚至可以在条件语句中动态加载模块。")]),t._v(" "),a("li",[t._v("这种特性使得 Webpack 能够在构建时分析代码的依赖关系，并生成一个依赖图。")])]),t._v(" "),a("p",[t._v("同步加载：")]),t._v(" "),a("ul",[a("li",[t._v("CommonJS 是同步加载模块的，适合 Node.js 的服务器端环境。")]),t._v(" "),a("li",[t._v("Webpack 在构建时模拟了这种同步加载的行为，将所有模块打包到一个或多个 bundle 中。")])]),t._v(" "),a("p",[t._v("3.Webpack 的核心设计")]),t._v(" "),a("p",[t._v("模块化依赖图：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 的核心是一个模块化依赖图，它通过递归分析 require() 或 import 语句来构建这个图。")]),t._v(" "),a("li",[t._v("虽然 Webpack 支持 ES 模块的语法（import/export），但在内部，Webpack 会将 ES 模块转换为类似 CommonJS 的形式进行处理。")])]),t._v(" "),a("p",[t._v("模块包装：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 会将每个模块包装到一个函数中，模拟 CommonJS 的作用域和模块导出机制。例如：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("兼容性：")]),t._v(" "),a("p",[t._v("Webpack 需要兼容多种模块系统（CommonJS、AMD、ES 模块等），而 CommonJS 的设计使得它能够更容易地处理这些不同的模块系统。")]),t._v(" "),a("p",[t._v("4.Webpack 对 ES 模块的支持")]),t._v(" "),a("p",[t._v("ES 模块语法支持：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 从 2.0 版本开始支持 ES 模块语法（import/export），但在内部仍然会将其转换为类似 CommonJS 的形式。")])]),t._v(" "),a("p",[t._v("Tree Shaking：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 支持基于 ES 模块的 Tree Shaking（摇树优化），这是因为 ES 模块的静态结构使得 Webpack 可以在构建时分析出未使用的代码并移除它们。")])]),t._v(" "),a("p",[t._v("动态导入：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 支持 ES 模块的动态导入（import()），用于实现代码分割和懒加载。")])]),t._v(" "),a("p",[t._v("5.为什么 Webpack 没有完全基于 ES 模块")]),t._v(" "),a("p",[t._v("兼容性：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 需要支持大量的历史代码和第三方库，这些代码大多是基于 CommonJS 的。")])]),t._v(" "),a("p",[t._v("动态加载的需求：")]),t._v(" "),a("ul",[a("li",[t._v("CommonJS 的动态加载特性（require()）在某些场景下非常有用，而 ES 模块的静态加载特性无法完全替代。")])]),t._v(" "),a("p",[t._v("Node.js 生态：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 最初是为 Node.js 生态设计的，而 Node.js 长期以来主要使用 CommonJS。")])]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[t._v("Vite 的对比")])]),t._v(" "),a("p",[t._v("Vite 基于 ES 模块：")]),t._v(" "),a("ul",[a("li",[t._v("Vite 是新一代构建工具，完全基于 ES 模块设计，利用现代浏览器的原生 ES 模块支持，避免了打包的开销。")])]),t._v(" "),a("p",[t._v("Webpack 的局限性：")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 的核心设计决定了它在开发环境下需要打包所有模块，而 Vite 则可以直接利用浏览器的 ES 模块加载能力，实现更快的启动和热更新。")])]),t._v(" "),a("p",[t._v("总结")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 主要是基于 CommonJS 开发的，这是因为它的设计早于 ES 模块的普及，并且 CommonJS 的动态加载特性更适合 Webpack 的模块化依赖图设计。")]),t._v(" "),a("li",[t._v("虽然 Webpack 支持 ES 模块语法，但在内部仍然会将其转换为类似 CommonJS 的形式进行处理。")]),t._v(" "),a("li",[t._v("随着 ES 模块的普及和新一代工具（如 Vite）的出现，Webpack 也在逐步增强对 ES 模块的支持，但其核心仍然是基于 CommonJS 的。")])])])}),[],!1,null,null,null);a.default=r.exports}}]);