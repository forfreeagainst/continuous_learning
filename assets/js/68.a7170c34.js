(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{389:function(s,t,a){"use strict";a.r(t);var e=a(25),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"sortable可排序的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sortable可排序的"}},[s._v("#")]),s._v(" sortable可排序的")]),s._v(" "),t("p",[s._v("vue-draggable-plus 拖拽Multirepo（vite打包，vue2+vue3+vue-demi兼容处理，vue3 + TypeScript）")]),s._v(" "),t("p",[s._v("vue-draggable-next: Vue3")]),s._v(" "),t("p",[s._v("https://form.making.link/docs/guide/v3/getting-started.html")]),s._v(" "),t("p",[s._v("https://lowcode-engine.cn/index")]),s._v(" "),t("p",[s._v("https://github.com/alibaba/lowcode-engine")]),s._v(" "),t("h2",{attrs:{id:"技术选型考量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#技术选型考量"}},[s._v("#")]),s._v(" 技术选型考量")]),s._v(" "),t("ul",[t("li",[s._v("原生Drag API痛点：需手动实现排序逻辑、跨容器交互复杂、无动画支持。现代浏览器支持，但移动端兼容性较差")]),s._v(" "),t("li",[s._v("vue-draggable-next：下载量 341k+， Github Stars 52k+， Unpacked Size 585 kB")]),s._v(" "),t("li",[s._v("vue-draggable-plus：下载量 328k+， Github Stars 3.5k+， Unpacked Size 213 kB")])]),s._v(" "),t("h2",{attrs:{id:"sortablejs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sortablejs"}},[s._v("#")]),s._v(" sortablejs")]),s._v(" "),t("div",{staticClass:"language-md extra-class"},[t("pre",{pre:!0,attrs:{class:"language-md"}},[t("code",[s._v("\n构建工具：vite\n")])])]),t("h2",{attrs:{id:"vue-dragable-plus"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-dragable-plus"}},[s._v("#")]),s._v(" Vue-dragable-plus")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("功能")]),s._v(" "),t("th",[s._v("Sortable.js原生实现")]),s._v(" "),t("th",[s._v("vue-draggable-plus封装增强")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("数据绑定")]),s._v(" "),t("td",[s._v("需手动监听事件更新数据")]),s._v(" "),t("td",[s._v("自动同步拖拽后的数据到v-model")])]),s._v(" "),t("tr",[t("td",[s._v("虚拟 DOM 兼容")]),s._v(" "),t("td",[s._v("直接操作真实 DOM, 可能和 Vue 渲染冲突")]),s._v(" "),t("td",[s._v("适配 Vue 的虚拟 DOM diff 机制，避免渲染问题")])])])]),s._v(" "),t("ul",[t("li",[s._v("useDraggable: 基于sortablejs，那我就先研究这个")]),s._v(" "),t("li",[s._v("directive: 基于useDraggable")]),s._v(" "),t("li",[s._v("components: 基于useDraggable")])]),s._v(" "),t("h3",{attrs:{id:"如何理解源码手动操作dom"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何理解源码手动操作dom"}},[s._v("#")]),s._v(" 如何理解源码手动操作DOM")]),s._v(" "),t("ul",[t("li",[s._v("insertNodeAt/removeNode 的作用：在拖拽过程中提供即时视觉反馈，属于必要的性能优化手段。")]),s._v(" "),t("li",[s._v("Vue 的协作方式：通过最终同步到响应式数据，保证 UI 与数据的长期一致性。")]),s._v(" "),t("li",[s._v("设计哲学：在特定性能敏感场景下，合理的手动 DOM 操作是 Vue 官方允许的模式（参考 Transition 组件的实现）。")])]),s._v(" "),t("h3",{attrs:{id:"package-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[s._v("#")]),s._v(" package.json")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    sideEffects"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 没有副作用的")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这是一个条件导出（Conditional Exports）的配置，它能根据不同的模块系统和使用场景提供不同的入口文件")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"exports"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"."')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"import"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"types"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/index.d.ts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/vue-draggable-plus.js"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"require"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"types"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/index.d.ts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/vue-draggable-plus.cjs"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/vue-draggable-plus.umd.cjs"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vitepress dev .docs --host：用 VitePress 启动 .docs 目录的开发服务器，并允许外部访问（--host）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"initial-scan docs && vitepress dev .docs --host"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用 Vite 构建生产环境代码")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vite build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm-run-all：一个可以顺序运行多个 npm 脚本的工具")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:lib"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm-run-all lint build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 先lint, 后build")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行对应的Node脚本，拷贝文档")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"copy:docs"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node scripts/copy-docs.cjs"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// cross-env NODE_ENV=production：设置环境变量 NODE_ENV=production（跨平台兼容）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vitepress build .docs：用 VitePress 构建 .docs 目录的生产版本")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"docs:build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"initial-scan docs && cross-env NODE_ENV=production && npm run copy:docs && vitepress build .docs"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vitepress serve .docs --host：启动一个本地服务器预览构建好的文档，并允许外部访问")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=production vitepress serve .docs --host"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对 src 目录下所有 .ts 文件进行代码规范检查")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint src/**/*.ts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint-fix"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pnpm lint --fix"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// np 是一个流行的 npm 发布工具，可以交互式地完成版本号升级、Git 打标签、发布到 npm 等操作")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 运行后会提示选择版本号（patch/minor/major），然后自动执行测试、构建、发布流程")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"release"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"np"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sortablejs 是 devDependencies：因为它只是前端库，由构建工具打包，不直接影响 Node.js 运行时。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// @types/sortablejs 是 dependencies：可能是因为服务端代码或构建过程依赖它的类型定义")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//（否则应该也放在 devDependencies）。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"其他拖拽方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他拖拽方案"}},[s._v("#")]),s._v(" 其他拖拽方案")]),s._v(" "),t("ul",[t("li",[s._v("mouseup")]),s._v(" "),t("li")])])}),[],!1,null,null,null);t.default=n.exports}}]);